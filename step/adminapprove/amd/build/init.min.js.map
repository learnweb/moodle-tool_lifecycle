{"version":3,"file":"init.min.js","sources":["../src/init.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Life Cycle Admin Approve Step AMD Module\n *\n * @module     lifecyclestep_adminapprove/init\n * @copyright  2019 Justus Dieckmann WWU\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery'], function($) {\n    return {\n        init: function(totalrows) {\n\n            $('#adminapprove_totalrows').html(totalrows);\n\n            $('input[name=\"checkall\"]').click(function() {\n                $('input[name=\"c[]\"]').prop('checked', $('input[name=\"checkall\"]').prop('checked'));\n            });\n\n            $('.selectedbutton').click(function() {\n                const sesskey = this.getAttribute('sesskey');\n                const stepid = this.getAttribute('stepid');\n                const action = this.getAttribute('action');\n                const checkboxes = document.querySelectorAll('input[name=\"c[]\"]');\n                let data = [];\n                let input;\n                for (let i = 0; checkboxes[i]; ++i) {\n                    if (checkboxes[i].checked) {\n                        data.push(checkboxes[i].value);\n                    }\n                }\n                let datalength = data.length;\n                if (datalength > 0) {\n                    let form = document.createElement('form');\n                    form.hidden = true;\n                    form.method = 'post';\n                    form.action = '';\n                    for (let i = 0; i < datalength; i++) {\n                        input = document.createElement('input');\n                        input.type = 'hidden';\n                        input.name = 'c[]';\n                        input.value = data[i];\n                        form.append(input);\n                    }\n                    input = document.createElement('input');\n                    input.type = 'hidden';\n                    input.name = 'action';\n                    input.value = action;\n                    form.append(input);\n                    input = document.createElement('input');\n                    input.type = 'hidden';\n                    input.name = 'stepid';\n                    input.value = stepid;\n                    form.append(input);\n                    input = document.createElement('input');\n                    input.type = 'hidden';\n                    input.name = 'sesskey';\n                    input.value = sesskey;\n                    form.append(input);\n                    document.body.append(form);\n                    form.submit();\n                }\n            });\n        }\n    };\n});"],"names":["define","$","init","totalrows","html","click","prop","sesskey","this","getAttribute","stepid","action","checkboxes","document","querySelectorAll","input","data","i","checked","push","value","datalength","length","form","createElement","hidden","method","type","name","append","body","submit"],"mappings":";;;;;;;AAsBAA,yCAAO,CAAC,WAAW,SAASC,SACjB,CACHC,KAAM,SAASC,WAEXF,EAAE,2BAA2BG,KAAKD,WAElCF,EAAE,0BAA0BI,OAAM,WAC9BJ,EAAE,qBAAqBK,KAAK,UAAWL,EAAE,0BAA0BK,KAAK,eAG5EL,EAAE,mBAAmBI,OAAM,iBACjBE,QAAUC,KAAKC,aAAa,WAC5BC,OAASF,KAAKC,aAAa,UAC3BE,OAASH,KAAKC,aAAa,UAC3BG,WAAaC,SAASC,iBAAiB,yBAEzCC,MADAC,KAAO,OAEN,IAAIC,EAAI,EAAGL,WAAWK,KAAMA,EACzBL,WAAWK,GAAGC,SACdF,KAAKG,KAAKP,WAAWK,GAAGG,WAG5BC,WAAaL,KAAKM,UAClBD,WAAa,EAAG,KACZE,KAAOV,SAASW,cAAc,QAClCD,KAAKE,QAAS,EACdF,KAAKG,OAAS,OACdH,KAAKZ,OAAS,OACT,IAAIM,EAAI,EAAGA,EAAII,WAAYJ,IAC5BF,MAAQF,SAASW,cAAc,SAC/BT,MAAMY,KAAO,SACbZ,MAAMa,KAAO,MACbb,MAAMK,MAAQJ,KAAKC,GACnBM,KAAKM,OAAOd,OAEhBA,MAAQF,SAASW,cAAc,SAC/BT,MAAMY,KAAO,SACbZ,MAAMa,KAAO,SACbb,MAAMK,MAAQT,OACdY,KAAKM,OAAOd,OACZA,MAAQF,SAASW,cAAc,SAC/BT,MAAMY,KAAO,SACbZ,MAAMa,KAAO,SACbb,MAAMK,MAAQV,OACda,KAAKM,OAAOd,OACZA,MAAQF,SAASW,cAAc,SAC/BT,MAAMY,KAAO,SACbZ,MAAMa,KAAO,UACbb,MAAMK,MAAQb,QACdgB,KAAKM,OAAOd,OACZF,SAASiB,KAAKD,OAAON,MACrBA,KAAKQ"}