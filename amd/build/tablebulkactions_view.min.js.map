{"version":3,"file":"tablebulkactions_view.min.js","sources":["../src/tablebulkactions_view.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript controller for submitting (table with) select fields.\n * @module     tool_lifecycle/tablebulkactions_view\n * @copyright  2026 Thomas Niedermaier University MÃ¼nster\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * Helper function to redirect via POST\n */\nfunction redirectPost() {\n\n    let data = [];\n    data.push({k: 'sesskey', v: M.cfg.sesskey});\n    data.push({k: 'bulkedit', v: 1});\n\n    let datatosubmit = false;\n    const selects = document.querySelectorAll('select[name=\"bulkactions\"]');\n    selects.forEach((s) => {\n        if (s.value) {\n            data.push({k: 'bulkactions[]', v: s.value});\n            datatosubmit = true;\n        }\n    });\n\n    if (datatosubmit) {\n        const form = document.createElement('form');\n        document.body.appendChild(form);\n        form.method = 'post';\n        form.action = '';\n        for (const pair of data) {\n            const input = document.createElement('input');\n            input.type = 'hidden';\n            input.name = pair.k;\n            input.value = pair.v;\n            form.appendChild(input);\n        }\n        form.submit();\n    }\n}\n\n/**\n * Init function\n */\nexport function init() {\n    const submitbuttons = document.querySelectorAll('input[name=\"button_submit_action_table\"]');\n\n    submitbuttons.forEach((s) => {\n        s.onclick = (e) => {\n            e.preventDefault();\n            redirectPost();\n        };\n    });\n}"],"names":["document","querySelectorAll","forEach","s","onclick","e","preventDefault","data","push","k","v","M","cfg","sesskey","datatosubmit","value","form","createElement","body","appendChild","method","action","pair","input","type","name","submit","redirectPost"],"mappings":"+JA4D0BA,SAASC,iBAAiB,4CAElCC,SAASC,IACnBA,EAAEC,QAAWC,IACTA,EAAEC;;;;;;;eArCNC,KAAO,GACXA,KAAKC,KAAK,CAACC,EAAG,UAAWC,EAAGC,EAAEC,IAAIC,UAClCN,KAAKC,KAAK,CAACC,EAAG,WAAYC,EAAG,QAEzBI,cAAe,KACHd,SAASC,iBAAiB,8BAClCC,SAASC,IACTA,EAAEY,QACFR,KAAKC,KAAK,CAACC,EAAG,gBAAiBC,EAAGP,EAAEY,QACpCD,cAAe,MAInBA,aAAc,OACRE,KAAOhB,SAASiB,cAAc,QACpCjB,SAASkB,KAAKC,YAAYH,MAC1BA,KAAKI,OAAS,OACdJ,KAAKK,OAAS,OACT,MAAMC,QAAQf,KAAM,OACfgB,MAAQvB,SAASiB,cAAc,SACrCM,MAAMC,KAAO,SACbD,MAAME,KAAOH,KAAKb,EAClBc,MAAMR,MAAQO,KAAKZ,EACnBM,KAAKG,YAAYI,OAErBP,KAAKU,UAaDC"}